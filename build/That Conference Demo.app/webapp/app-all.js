/*
Copyright(c) 2012 Company Name
*/
Ext.define("ThatConference.view.MyNavigationView",{extend:"Ext.navigation.View",config:{items:[{xtype:"container",layout:{type:"fit"},items:[{xtype:"image",centered:true,height:223,itemId:"logo",width:300,src:"img/logo.png"}]}]}});Ext.define("ThatConference.model.Person",{extend:"Ext.data.Model",config:{fields:[{mapping:"attendee.id",name:"id",type:"int"},{name:"name",type:"string"}]}});Ext.define("ThatConference.view.AttendeeList",{extend:"Ext.Container",config:{layout:{type:"fit"},items:[{xtype:"list",itemId:"AttendeeList",itemTpl:["<div>{name}</div>"],store:"Attendees"},{xtype:"toolbar",docked:"top",layout:{pack:"end",type:"hbox"},items:[{xtype:"button",itemId:"pickWinner",ui:"confirm",text:"Pick Winner"}]}]}});Ext.define("ThatConference.controller.App",{extend:"Ext.app.Controller",config:{control:{"img#logo":{tap:"showList"},"button#pickWinner":{tap:"pickWinner"}}},showList:function(a,f,b){var d=a.up("navigationview");var c=Ext.create("ThatConference.view.AttendeeList");d.push(c);c.down("list").getStore().load()},pickWinner:function(d,g,c){var a=Ext.data.StoreManager.lookup("Attendees");var b=Math.floor(Math.random()*a.getCount());var f=a.getAt(b);Ext.Msg.alert("The winner...",f.get("name"))}});Ext.define("ThatConference.store.Attendees",{extend:"Ext.data.Store",requires:["ThatConference.model.Person"],config:{model:"ThatConference.model.Person",storeId:"Attendees",proxy:{type:"ajax",url:"people.json",reader:{type:"json",rootProperty:"people"}}}});Ext.Loader.setConfig({enabled:true});Ext.application({models:["Person"],stores:["Attendees"],views:["MyNavigationView","AttendeeList"],name:"ThatConference",controllers:["App"],launch:function(){Ext.create("ThatConference.view.MyNavigationView",{fullscreen:true})}});
